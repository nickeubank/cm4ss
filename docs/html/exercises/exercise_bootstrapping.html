<!DOCTYPE html> <html lang=en > <meta charset=utf-8  /> <meta name=viewport  content="width=device-width, initial-scale=1.0" /><meta name=generator  content="Docutils 0.17.1: http://docutils.sourceforge.net/" /> <meta name=viewport  content="width=device-width,initial-scale=1"> <meta http-equiv=x-ua-compatible  content="ie=edge"> <meta name="lang:clipboard.copy" content="Copy to clipboard"> <meta name="lang:clipboard.copied" content="Copied to clipboard"> <meta name="lang:search.language" content=en > <meta name="lang:search.pipeline.stopwords" content=True > <meta name="lang:search.pipeline.trimmer" content=True > <meta name="lang:search.result.none" content="No matching documents"> <meta name="lang:search.result.one" content="1 matching document"> <meta name="lang:search.result.other" content="# matching documents"> <meta name="lang:search.tokenizer" content="[\s\-]+"> <link href="https://fonts.gstatic.com/" rel=preconnect  crossorigin> <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel=stylesheet > <style> body, input { font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif } code, kbd, pre { font-family: "Roboto Mono", "Courier New", Courier, monospace } </style> <link rel=stylesheet  href="../_static/stylesheets/application.css"/> <link rel=stylesheet  href="../_static/stylesheets/application-palette.css"/> <link rel=stylesheet  href="../_static/stylesheets/application-fixes.css"/> <link rel=stylesheet  href="../_static/fonts/material-icons.css"/> <meta name=theme-color  content="#012169"> <script src="../_static/javascripts/modernizr.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-203713456-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-203713456-1'); </script> <title>Bootstrapping Exercise &#8212; Computational Methods for Social Scientists</title> <link rel=stylesheet  type="text/css" href="../_static/pygments.css" /> <link rel=stylesheet  type="text/css" href="../_static/material.css" /> <script data-url_root="../" id=documentation_options  src="../_static/documentation_options.js"></script> <script src="../_static/jquery.js"></script> <script src="../_static/underscore.js"></script> <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script> <script src="../_static/doctools.js"></script> <script crossorigin=anonymous  integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script> <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script> <script defer=defer  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script> <link rel="shortcut icon" href="../_static/mids_logo.svg"/> <link rel=index  title=Index  href="../genindex.html" /> <link rel=search  title=Search  href="../search.html" /> <body dir=ltr data-md-color-primary=blue-grey data-md-color-accent=blue> <svg class=md-svg > <defs data-children-count=0 > <svg xmlns="http://www.w3.org/2000/svg" width=416  height=448  viewBox="0 0 416 448" id=__github ><path fill=currentColor  d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle  data-md-toggle=drawer  type=checkbox  id=__drawer > <input class=md-toggle  data-md-toggle=search  type=checkbox  id=__search > <label class=md-overlay  data-md-component=overlay  for=__drawer ></label> <a href="#exercises/exercise_bootstrapping" tabindex=1  class=md-skip > Skip to content </a> <header class=md-header  data-md-component=header > <nav class="md-header-nav md-grid"> <div class="md-flex navheader"> <div class="md-flex__cell md-flex__cell--shrink"> <a href="../index.html" title="Computational Methods for Social Scientists" class="md-header-nav__button md-logo"> <img src="../_static/mids_logo.svg" height=26  alt="Computational Methods for Social Scientists logo"> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer ></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title > <span class=md-header-nav__topic >Computational Methods for Social Scientists</span> <span class=md-header-nav__topic > Bootstrapping Exercise </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search ></label> <div class=md-search  data-md-component=search  role=dialog > <label class=md-search__overlay  for=__search ></label> <div class=md-search__inner  role=search > <form class=md-search__form  action="../search.html" method=get  name=search > <input type=text  class=md-search__input  name=q  placeholder=""Search"" autocapitalize=off  autocomplete=off  spellcheck=false  data-md-component=query  data-md-state=active > <label class="md-icon md-search__icon" for=__search ></label> <button type=reset  class="md-icon md-search__icon" data-md-component=reset  tabindex=-1 > &#xE5CD; </button> </form> <div class=md-search__output > <div class=md-search__scrollwrap  data-md-scrollfix> <div class=md-search-result  data-md-component=result > <div class=md-search-result__meta > Type to start searching </div> <ol class=md-search-result__list ></ol> </div> </div> </div> </div> </div> </div> <script src="../_static/javascripts/version_dropdown.js"></script> <script> var json_loc = "../"versions.json"", target_loc = "../../", text = "Versions"; $( document ).ready( add_version_dropdown(json_loc, target_loc, text)); </script> </div> </nav> </header> <div class=md-container > <nav class=md-tabs  data-md-component=tabs > <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list > <li class=md-tabs__item ><a href="../index.html" class=md-tabs__link >Home</a> <li class=md-tabs__item ><a href="../class_schedule_fall.html" class=md-tabs__link >Class Schedule (Fall 2023)</a> <li class=md-tabs__item ><a href="../class_schedule_winter.html" class=md-tabs__link >Class Schedule (Winter 2024)</a> <li class=md-tabs__item ><a href="https://www.nickeubank.com" class=md-tabs__link >About The Author</a> </ul> </div> </nav> <main class=md-main > <div class="md-main__inner md-grid" data-md-component=container > <div class="md-sidebar md-sidebar--primary" data-md-component=navigation > <div class=md-sidebar__scrollwrap > <div class=md-sidebar__inner > <nav class="md-nav md-nav--primary" data-md-level=0 > <label class="md-nav__title md-nav__title--site" for=__drawer > <a href="../index.html" title="Computational Methods for Social Scientists" class="md-nav__button md-logo"> <img src="../_static/mids_logo.svg" alt=" logo" width=48  height=48 > </a> <a href="../index.html" title="Computational Methods for Social Scientists">Computational Methods for Social Scientists</a> </label> <ul class=md-nav__list > <li class=md-nav__item > <a href="../class_schedule_fall.html" class=md-nav__link >Class Schedule (August 2023)</a> <li class=md-nav__item > <a href="../class_schedule_winter.html" class=md-nav__link >Class Schedule (January 2024)</a> <li class=md-nav__item > <span class="md-nav__link caption"><span class=caption-text >Class Readings</span></span> <li class=md-nav__item > <a href="../intro_to_r.html" class=md-nav__link >Intro to R</a> <li class=md-nav__item > <a href="../intro_to_datatypes.html" class=md-nav__link >Intro to Data Types</a> <li class=md-nav__item > <a href="../intro_to_vectors.html" class=md-nav__link >Intro to Vectors</a> <li class=md-nav__item > <a href="../manipulating_vectors.html" class=md-nav__link >Manipulating Vectors</a> <li class=md-nav__item > <a href="../intro_to_matrices.html" class=md-nav__link >Intro to Matrices</a> <li class=md-nav__item > <a href="../manipulating_matrices.html" class=md-nav__link >Manipulating Matrices</a> <li class=md-nav__item > <a href="../intro_to_dataframes.html" class=md-nav__link >Intro to Dataframes</a> <li class=md-nav__item > <a href="../manipulating_dataframes.html" class=md-nav__link >Manipulating Dataframes</a> <li class=md-nav__item > <a href="../intro_to_tidyverse.html" class=md-nav__link >dplyr and the Tidyverse</a> <li class=md-nav__item > <a href="../defensive_programming.html" class=md-nav__link >Defensive Programming</a> <li class=md-nav__item > <a href="../intro_to_merging.html" class=md-nav__link >Intro to Merging</a> <li class=md-nav__item > <a href="../defensive_merging.html" class=md-nav__link >Defensive Merging</a> <li class=md-nav__item > <a href="../missing_data.html" class=md-nav__link >Missing Data</a> <li class=md-nav__item > <a href="../loops.html" class=md-nav__link >Loops</a> <li class=md-nav__item > <a href="../functions.html" class=md-nav__link >Functions</a> <li class=md-nav__item > <a href="../function_example.html" class=md-nav__link >Function Example</a> <li class=md-nav__item > <span class="md-nav__link caption"><span class=caption-text >Additional Topics</span></span> <li class=md-nav__item > <a href="../lists.html" class=md-nav__link >Lists</a> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc > <div class=md-sidebar__scrollwrap > <div class=md-sidebar__inner > <nav class="md-nav md-nav--secondary"> <label class=md-nav__title  for=__toc >"Contents"</label> <ul class=md-nav__list  data-md-scrollfix=""> <li class=md-nav__item ><a href="#exercises-exercise-bootstrapping--page-root" class=md-nav__link >Bootstrapping Exercise</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Resume-Experiment-Analysis" class=md-nav__link >Resume Experiment Analysis</a> <li class=md-nav__item ><a href="#Step-1:-Data-Prep" class=md-nav__link >Step 1: Data Prep</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Exercise-1" class=md-nav__link >Exercise 1</a> <li class=md-nav__item ><a href="#Exercise-2" class=md-nav__link >Exercise 2</a> <li class=md-nav__item ><a href="#Exercise-3" class=md-nav__link >Exercise 3</a> </ul> </nav> <li class=md-nav__item ><a href="#Step-2:-Do-A-Single-Bootstrap" class=md-nav__link >Step 2: Do A Single Bootstrap</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Exercise-4" class=md-nav__link >Exercise 4</a> <li class=md-nav__item ><a href="#Exercise-5" class=md-nav__link >Exercise 5</a> <li class=md-nav__item ><a href="#Exercise-6" class=md-nav__link >Exercise 6</a> <li class=md-nav__item ><a href="#Exercise-7" class=md-nav__link >Exercise 7</a> <li class=md-nav__item ><a href="#Exercise-8" class=md-nav__link >Exercise 8</a> </ul> </nav> <li class=md-nav__item ><a href="#Step-3:-Build-the-Loop" class=md-nav__link >Step 3: Build the Loop</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Exercise-9" class=md-nav__link >Exercise 9</a> <li class=md-nav__item ><a href="#Exercise-10" class=md-nav__link >Exercise 10</a> <li class=md-nav__item ><a href="#Exercise-11" class=md-nav__link >Exercise 11</a> </ul> </nav> <li class=md-nav__item ><a href="#Step-4:-Scale-It-Up" class=md-nav__link >Step 4: Scale It Up</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Exercise-12" class=md-nav__link >Exercise 12</a> <li class=md-nav__item ><a href="#Exercise-13" class=md-nav__link >Exercise 13</a> </ul> </nav> <li class=md-nav__item ><a href="#(Extra-Credit)-Step-5:-Generalize-It" class=md-nav__link >(Extra Credit) Step 5: Generalize It</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#Extra-Credit-1:-Generalize-The-Coefficient-Storage" class=md-nav__link >Extra Credit 1: Generalize The Coefficient Storage</a> <li class=md-nav__item ><a href="#Extra-Credit-2:-Put-It-In-A-Function" class=md-nav__link >Extra Credit 2: Put It In A Function</a> <li class=md-nav__item ><a href="#Extra-Credit-3:-Generalize-The-Function" class=md-nav__link >Extra Credit 3: Generalize The Function</a> <li class=md-nav__item ><a href="#Extra-Credit-4:-Generalize-It-Even-More" class=md-nav__link >Extra Credit 4: Generalize It Even More</a> </ul> </nav> </ul> </nav> </ul> </nav> </div> </div> </div> <div class=md-content > <article class="md-content__inner md-typeset" role=main > <section id=Bootstrapping-Exercise > <h1 id=exercises-exercise-bootstrapping--page-root >Bootstrapping Exercise<a class=headerlink  href="#exercises-exercise-bootstrapping--page-root" title="Permalink to this heading">¶</a></h1> <p>In this exercise, we will bring together a range of different tools and skills we’ve learned — including vector, matrix, and data.frame manipulation, loops, and functions — for a single purpose: calculating bootstrapped standard errors.</p> <p>To review, to create a bootstrapped estimate of a coefficient and it’s standard error, we need to:</p> <ul class=simple > <li><p><strong>Re-sampled our data with replacement:</strong> we take our <em>actual</em> 1,000 observations and create a new “re-sampled” dataset by picking one random observation to put in our “new” data at a time, 1,000 times, but allowing for the same observation to get picked as many times as chance allows. For example, Respondent 1 might not end up in the “new” dataset, while Respondent 2 might end up 4 times. This gives us a new dataset that looks a lot like what we would have gotten if we’d actually gone back to our population of interest and collected 1,000 entirely new survey responses.</p> <li><p><strong>Run the regression:</strong> we regress income on gender with this new, re-sampled dataset. This will give us a new estimate of the partial correlation between gender and income (<span class="math notranslate nohighlight">\(\beta\)</span>) that should be similar to but distinct from the estimate we got with our original dataset (since some observations didn’t make it into this new dataset and some have been repeated).</p> <li><p><strong>Record the new value of :math:`beta`:</strong> Just, you know, write it down or store it somewhere.</p> </ul> <p>But don’t worry, we aren’t going just jump straight to trying to do all that at once. It is <strong>never</strong> a good idea when attempting something complicated (like bootstrapping) to try and “just write it out.”</p> <p>Rather, the way we will approach this is by building up a script little by little from running a simple regression to taking on the task of doing a full bootstrap.</p> <section id=Resume-Experiment-Analysis > <h2 id=Resume-Experiment-Analysis >Resume Experiment Analysis<a class=headerlink  href="#Resume-Experiment-Analysis" title="Permalink to this heading">¶</a></h2> <p>How much harder is it to get a job in the United States if you are Black than if you are White? Or, expressed differently, what is the <em>effect</em> of race on the difficulty of getting a job in the US?</p> <p>In this exercise, we will be analyzing data from a real world experiment designed to help answer this question. Namely, we will be analyzing data from a randomized experiment in which 4,870 ficticious resumes were sent out to employers in response to job adverts in Boston and Chicago in 2001. The resumes differ in various attributes including the names of the applicants, and different resumes were randomly allocated to job openings.</p> <p>The “experiment” part of the experiment is that resumes were randomly assigned Black- or White-sounding names, and then watched to see whether employers called the “applicants” with Black-sounding names at the same rate as the applicants with the White-sounding names.</p> <p>(Which names constituted “Black-sounding names” and “White-sounding names” was determined by analyzing names on Massachusetts birth certificates to determine which names were most associated with Black and White children, and then surveys were used to validate that the names were perceived as being associated with individuals of one racial category or the other).</p> <p>You can get access to original article <a class="reference external" href="https://www.aeaweb.org/articles?id=10.1257/0002828042002561">here</a>.</p> <p><em>Note to Duke students:</em> if you are on the Duke campus network, you’ll be able to access almost any academic journal articles directly; if you are off campus and want access, you can just go to the <a class="reference external" href="https://library.duke.edu/">Duke Library</a> website and search for the article title. Once you find it, you’ll be asked to log in, after which you’ll have full access to the article. You will also find this pattern holds true at nearly any major University in the US.</p> </section> <section id="Step-1:-Data-Prep"> <h2 id="Step-1:-Data-Prep">Step 1: Data Prep<a class=headerlink  href="#Step-1:-Data-Prep" title="Permalink to this heading">¶</a></h2> <section id=Exercise-1 > <h3 id=Exercise-1 >Exercise 1<a class=headerlink  href="#Exercise-1" title="Permalink to this heading">¶</a></h3> <p>Download the data set <code class="docutils literal notranslate"><span class=pre >resume_experiment.dta</span></code> from <a class="reference external" href="https://github.com/nickeubank/MIDS_Data/tree/master/resume_experiment">github here</a>, or by doing to <code class="docutils literal notranslate"><span class=pre >www.github.com/nickeubank/MIDS_Data</span></code> and opening the <code class="docutils literal notranslate"><span class=pre >resume_experiment</span></code> folder.</p> <p>Then <strong>IN A NEW ``.R`` FILE</strong> use <code class="docutils literal notranslate"><span class=pre >read_dta</span></code> from the <code class="docutils literal notranslate"><span class=pre >haven</span></code> library to load the data.</p> </section> <section id=Exercise-2 > <h3 id=Exercise-2 >Exercise 2<a class=headerlink  href="#Exercise-2" title="Permalink to this heading">¶</a></h3> <p><code class="docutils literal notranslate"><span class=pre >black</span></code> is the treatment variable in the data set (whether the resume has a Black-sounding name). <code class="docutils literal notranslate"><span class=pre >call</span></code> is the dependent variable of interest (did the employer call the fictitious applicant for an interview)</p> <p>In addition, the data include a number of variables to describe the other features in each fictitious resume, including applicants education level (<code class="docutils literal notranslate"><span class=pre >education</span></code>), years of experience (<code class="docutils literal notranslate"><span class=pre >yearsexp</span></code>), gender (<code class="docutils literal notranslate"><span class=pre >female</span></code>), computer skills (<code class="docutils literal notranslate"><span class=pre >computerskills</span></code>), and number of previous jobs (<code class="docutils literal notranslate"><span class=pre >ofjobs</span></code>). Each resume has a random selection of these attributes, so on average the Black-named fictitious applicant resumes have the same qualifications as the White-named applicant resumes.</p> <p>For this analysis, we will focus our attention on less educated job applicants. In this dataset, <code class="docutils literal notranslate"><span class=pre >education</span></code> is a categorical variable coded as follows:</p> <ul class=simple > <li><p>0: Education not reported</p> <li><p>1: High school dropout</p> <li><p>2: High school graduate</p> <li><p>3: Some college</p> <li><p>4: College graduate or higher</p> </ul> <p>Please subset your data to only include applications that did <em>not</em> report any college education.</p> </section> <section id=Exercise-3 > <h3 id=Exercise-3 >Exercise 3<a class=headerlink  href="#Exercise-3" title="Permalink to this heading">¶</a></h3> <p>Now that we have the dataset we are interested in analyzing, let’s begin by running a normal linear regression. If you aren’t familiar with R, this can be accomplished with the <code class="docutils literal notranslate"><span class=pre >lm()</span></code> function (“lm” for “linear model”). To regress whether an applicant got a call back on whether their resume had a Black-sounding name, whether they were female, and the number of past jobs listed, you would run code that looks something like:</p> <div class="highlight-r notranslate"><div class=highlight ><pre><span></span><span class=nf >lm</span><span class=p >(</span><span class=s >"call ~ black + female + ofjobs"</span><span class=p >,</span><span class=w > </span><span class=n >resumes</span><span class=p >)</span>
</pre></div> </div> <p>where you may replace <code class="docutils literal notranslate"><span class=pre >resumes</span></code> with whatever you’ve been calling your dataframe.</p> <p>What is the coefficient on having a Black sounding name, and what is the associated standard error?</p> <p>(You may have to call <code class="docutils literal notranslate"><span class=pre >summary()</span></code> on the result of <code class="docutils literal notranslate"><span class=pre >lm()</span></code> to see the standard error. I recommend assigning the result of <code class="docutils literal notranslate"><span class=pre >lm()</span></code> to a new variable, then calling <code class="docutils literal notranslate"><span class=pre >summary()</span></code> on that new variable).</p> </section> </section> <section id="Step-2:-Do-A-Single-Bootstrap"> <h2 id="Step-2:-Do-A-Single-Bootstrap">Step 2: Do A Single Bootstrap<a class=headerlink  href="#Step-2:-Do-A-Single-Bootstrap" title="Permalink to this heading">¶</a></h2> <p>Because the idea of bootstrapping is to do something <em>over and over and over</em>, your mind is hopefully thinking “I’m gonna use a loop!” And you’d be right! But before we do that, let’s try and write a little bit of code that does what we want to do over and over <em>once</em>.</p> <section id=Exercise-4 > <h3 id=Exercise-4 >Exercise 4<a class=headerlink  href="#Exercise-4" title="Permalink to this heading">¶</a></h3> <p>The first step in bootstrapping is to re-sample our data with replacement. Use the <code class="docutils literal notranslate"><span class=pre >sample()</span></code> function to create a <em>new</em> data.frame that contains a random sample (with replacement) of the rows from the original data.</p> <p>You will probably need to check the documentation of <code class="docutils literal notranslate"><span class=pre >sample()</span></code>.</p> <p><em>Hint:</em> Remember if you wanted to get rows 1, 1, 3, and 9 from an existing dataframe as the first four rows of a new dataframe, you could do it with <code class="docutils literal notranslate"><span class=pre >resumes[c(1,</span> <span class=pre >1,</span> <span class=pre >3,</span> <span class=pre >9),</span> <span class=pre >]</span></code>. You might want to think about how to build on that example using the output of <code class="docutils literal notranslate"><span class=pre >sample()</span></code>.</p> </section> <section id=Exercise-5 > <h3 id=Exercise-5 >Exercise 5<a class=headerlink  href="#Exercise-5" title="Permalink to this heading">¶</a></h3> <p>Verify that your new dataset has the same number of observations as your original dataset! (Always good to check your work).</p> </section> <section id=Exercise-6 > <h3 id=Exercise-6 >Exercise 6<a class=headerlink  href="#Exercise-6" title="Permalink to this heading">¶</a></h3> <p>Now re-run the regression you ran above using this bootstrapped sample. You should get a coefficient on <code class="docutils literal notranslate"><span class=pre >black</span></code> that is similar but distinct from the one you got before.</p> </section> <section id=Exercise-7 > <h3 id=Exercise-7 >Exercise 7<a class=headerlink  href="#Exercise-7" title="Permalink to this heading">¶</a></h3> <p>Now the slightly tricky part. Because we’re going to do this over and over, we need to find a way to “save” the coefficient on <code class="docutils literal notranslate"><span class=pre >black</span></code>, which means we need to figure out how to get just the coefficient on <code class="docutils literal notranslate"><span class=pre >black</span></code> out of the object we got back from <code class="docutils literal notranslate"><span class=pre >lm()</span></code>.</p> <p>Objects, like what you get back from <code class="docutils literal notranslate"><span class=pre >lm()</span></code> are kind of like lists, and you can see their contents with the <code class="docutils literal notranslate"><span class=pre >str()</span></code> command (for “structure”). So to see what’s in the result of <code class="docutils literal notranslate"><span class=pre >lm()</span></code>, you can do something like:</p> <div class="highlight-r notranslate"><div class=highlight ><pre><span></span><span class=n >my_model</span><span class=w > </span><span class=o >&lt;-</span><span class=w > </span><span class=nf >lm</span><span class=p >(</span><span class=s >"call ~ black + female + ofjobs"</span><span class=p >,</span><span class=w > </span><span class=n >resumes</span><span class=p >))</span>
<span class=nf >str</span><span class=p >(</span><span class=n >my_model</span><span class=p >)</span>
</pre></div> </div> <p>That output should tell you that <code class="docutils literal notranslate"><span class=pre >my_model</span></code> is basically just a list, and you can get entries out of a list with the <code class="docutils literal notranslate"><span class=pre >$</span></code> operator. So in this case, you can get the coefficients from a regression with <code class="docutils literal notranslate"><span class=pre >my_model$coeffients</span></code>.</p> <p>I will leave it to you to figure out how to get out JUST the coefficient on <code class="docutils literal notranslate"><span class=pre >black</span></code>.</p> </section> <section id=Exercise-8 > <h3 id=Exercise-8 >Exercise 8<a class=headerlink  href="#Exercise-8" title="Permalink to this heading">¶</a></h3> <p>Now, if you’ve been doing all this one step at a time, you may have a bit of a mess in your .R file, so this is a good time to clean things up and leave some comments. At the top, you should have a block that reads in this data and subsets it for less educated applicants.</p> <p>Then you should have a section with the first regression you ran.</p> <p>Finally, you should have a section where you are building your bootstrap. It starts by re-sampling your data, running your regression using the new data, and extracting the coefficient on <code class="docutils literal notranslate"><span class=pre >black</span></code>.</p> <p>Take a minute to add some comments and clean up your file to reflect this organization.</p> </section> </section> <section id="Step-3:-Build-the-Loop"> <h2 id="Step-3:-Build-the-Loop">Step 3: Build the Loop<a class=headerlink  href="#Step-3:-Build-the-Loop" title="Permalink to this heading">¶</a></h2> <p>Now it’s time to build a loop! Initially, let’s just write a loop that will run 5 times (it’s easy to make that more later, but we don’t want it to take a long time running while we’re trouble shooting!)</p> <section id=Exercise-9 > <h3 id=Exercise-9 >Exercise 9<a class=headerlink  href="#Exercise-9" title="Permalink to this heading">¶</a></h3> <p>First, write a loop that will run 5 times, increasing the value of a variable <code class="docutils literal notranslate"><span class=pre >i</span></code> each time. Don’t put any of our bootstrap code in there yet — just add a <code class="docutils literal notranslate"><span class=pre >print(i)</span></code> statement so you can see that it’s running five times and incrementing <code class="docutils literal notranslate"><span class=pre >i</span></code>.</p> </section> <section id=Exercise-10 > <h3 id=Exercise-10 >Exercise 10<a class=headerlink  href="#Exercise-10" title="Permalink to this heading">¶</a></h3> <p>Now put the bootstrap code inside the loop. Now when you run this code, you should see five regressions being run, each a little different. You can add a print statement if needed (e.g., <code class="docutils literal notranslate"><span class=pre >print(bootstrapped_black_coef)</span></code>) to ensure you can see what’s happening.</p> </section> <section id=Exercise-11 > <h3 id=Exercise-11 >Exercise 11<a class=headerlink  href="#Exercise-11" title="Permalink to this heading">¶</a></h3> <p>To make the bootstrap work, we’ll need to store the value of our coefficient each time the loop runs. So <em>above</em> the loop, create a vector that’s 5 entries long (e.g., <code class="docutils literal notranslate"><span class=pre >bootstrap_coefficients</span> <span class=pre >&lt;-</span> <span class=pre >zeros(5)</span></code>).</p> <p>Then, each time the loop goes around, store the value of the coefficient on <code class="docutils literal notranslate"><span class=pre >black</span></code> in the vector. Put the first estimate in the first spot, the second in the second, etc.</p> <p>Hint: you’ll want to use that <code class="docutils literal notranslate"><span class=pre >i</span></code> variable we created above.</p> <p>When you’re done, the vector you created (I called it <code class="docutils literal notranslate"><span class=pre >bootstrap_coefficients</span></code> above) should have no entries that are the <code class="docutils literal notranslate"><span class=pre >0</span></code>s that were there when it was created, and instead all five entries should contain different estimates of the coefficient on <code class="docutils literal notranslate"><span class=pre >black</span></code>.</p> </section> </section> <section id="Step-4:-Scale-It-Up"> <h2 id="Step-4:-Scale-It-Up">Step 4: Scale It Up<a class=headerlink  href="#Step-4:-Scale-It-Up" title="Permalink to this heading">¶</a></h2> <p>OK, we have it working, let’s go big!</p> <section id=Exercise-12 > <h3 id=Exercise-12 >Exercise 12<a class=headerlink  href="#Exercise-12" title="Permalink to this heading">¶</a></h3> <p>We’re going to do our bootstrap 500 times, so make the vector in which you are storing coefficients bigger (<code class="docutils literal notranslate"><span class=pre >zeros(500)</span></code>) and set your loop to run 500 times. Then let ‘er rip!</p> </section> <section id=Exercise-13 > <h3 id=Exercise-13 >Exercise 13<a class=headerlink  href="#Exercise-13" title="Permalink to this heading">¶</a></h3> <p>Great! Now let’s get that final estimate we wanted. Using <code class="docutils literal notranslate"><span class=pre >mean()</span></code> and <code class="docutils literal notranslate"><span class=pre >sd()</span></code>, get the mean and standard deviation of your vector of coefficient estimates. How do they compare to the original estimate and standard error you got straight from the <code class="docutils literal notranslate"><span class=pre >lm()</span></code> command?</p> </section> </section> <section id="(Extra-Credit)-Step-5:-Generalize-It"> <h2 id="(Extra-Credit)-Step-5:-Generalize-It">(Extra Credit) Step 5: Generalize It<a class=headerlink  href="#(Extra-Credit)-Step-5:-Generalize-It" title="Permalink to this heading">¶</a></h2> <p>Want more practice? Here are three things to do:</p> <section id="Extra-Credit-1:-Generalize-The-Coefficient-Storage"> <h3 id="Extra-Credit-1:-Generalize-The-Coefficient-Storage">Extra Credit 1: Generalize The Coefficient Storage<a class=headerlink  href="#Extra-Credit-1:-Generalize-The-Coefficient-Storage" title="Permalink to this heading">¶</a></h3> <p>Rather than just storing the coefficient on <code class="docutils literal notranslate"><span class=pre >black</span></code>, store <em>all</em> the coefficients on each pass. Hint: to do this, you won’t be able to store the results in a vector any more…</p> </section> <section id="Extra-Credit-2:-Put-It-In-A-Function"> <h3 id="Extra-Credit-2:-Put-It-In-A-Function">Extra Credit 2: Put It In A Function<a class=headerlink  href="#Extra-Credit-2:-Put-It-In-A-Function" title="Permalink to this heading">¶</a></h3> <p>Take the code that runs your regression and extracts the coefficients and put it in a stand-alone function. This is a little gratuitous — it’s not that complicated a piece of code — but it’s fun practice for writing functions!</p> </section> <section id="Extra-Credit-3:-Generalize-The-Function"> <h3 id="Extra-Credit-3:-Generalize-The-Function">Extra Credit 3: Generalize The Function<a class=headerlink  href="#Extra-Credit-3:-Generalize-The-Function" title="Permalink to this heading">¶</a></h3> <p>Take that function and parameterize it so that users can specify a list of coefficients to save.</p> </section> <section id="Extra-Credit-4:-Generalize-It-Even-More"> <h3 id="Extra-Credit-4:-Generalize-It-Even-More">Extra Credit 4: Generalize It Even More<a class=headerlink  href="#Extra-Credit-4:-Generalize-It-Even-More" title="Permalink to this heading">¶</a></h3> <p>Pull this all together by wrapping all this up in a bootstrap regression function that takes:</p> <ul class=simple > <li><p>a regression specification (as a string),</p> <li><p>a dataset,</p> <li><p>a number of iterations, and</p> <li><p>a list of coefficients to retain</p> </ul> <p>And returns the point estimate and standard errors for those coefficients!</p> </section> </section> </section> </article> </div> </div> </main> </div> <footer class=md-footer > <div class=md-footer-nav > <nav class="md-footer-nav__inner md-grid"> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright > <div class=md-footer-copyright__highlight > &#169; Copyright 2024, Nick Eubank. </div> Created using <a href="http://www.sphinx-doc.org/">Sphinx</a> 5.0.2. and <a href="https://github.com/bashtage/sphinx-material/">Material for Sphinx</a> </div> </div> </div> </footer> <script src="../_static/javascripts/application.js"></script> <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>